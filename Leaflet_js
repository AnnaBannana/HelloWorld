//js file
console.log(1);


function loadMap() {  // this is a function and run once
console.log(5);
	
	// Step 1 : set up basemap (cartodb, tilemile or tilelayer)
	var mymap = L.map('mapid').setView([51.505, -0.09], 13);   // create a leaflet map in the container map id and then set it to zoom to london with lat long coordinates, zoom
	L.tileLayer('http://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}.png', { maxZoom: 18,  }).addTo(mymap);  //map quest and then upload it into my empty container <div id="mapid"></div>   but charge it from the javascript file. 

  	// Step 2 : Load data using JQuery - explanation : (http://api.jquery.com/jquery.getjson/)
	var loaddata= jQuery.getJSON('events_json.json');  // Load JSON-encoded data with a simple string as JSON object
	console.log(loaddata);
	//transform each value to be callable by string with stringify()?


	//Step 3 : Display markers 

	var lat;
	var lng;
    for (i = 0; i < loaddata.length; i++) {
    	lat = parseFloat(loaddata[i].lat);
        lng = parseFloat(loaddata[i].lng);

        //var points = new L.Point([lat, lng]).addTo(mymap);
        //L.marker([lat, lng]).addTo(mymap);
    }
    console.log(lng);
    
	//Display points based on lat long of our 
	//var lat=jQuery.getJSON(loaddata["this.responseJSON.latitutde"]);
	//console.log(lat);
	//var lng=jQuery.getJSON(loaddata["this.responseJSON.longitude"]);
	//console.log(lng);

	//Step 3 : Define our features 
	var geojsonFeature = [{ 
		"type": "Feature", 
		"properties": {
        "categories": "Fashion & Health"
    	},
        "geometry": {"type": "Polygon","coordinates": [lat,lng]
        }
	}];

	L.geoJson(geojsonFeature).addTo(map);

	Display a simple marker
	var markers =L.marker([51.505, -0.09]).addTo(mymap);


    //L.geoJson(geojsonFeature).addTo(mymap);

	//interactions

	// timeline

	// this runs one and add the listerner to the browser


} //Close function




if(window.addEventListener){
	window.addEventListener('DOMContentLoaded', loadMap, false);
} else {
	window.onload=loadMap;
}
